<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iivari Kortesoja – Videotuotannot & Valokuvaus</title>
    <meta name="description" content="Ammattimaiset videotuotannot, valokuvaus ja ilmakuvaus ympäri Suomea. Freelance-elokuvantekijä Iivari Kortesoja.">

    <!-- GOOGLE ANALYTICS 4 – ei käynnisty ennen suostumusta -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JTMFLZTH9R"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('consent', 'default', { 'analytics_storage': 'denied' });
      gtag('config', 'G-JTMFLZTH9R', { 'anonymize_ip': true });
    </script>

    <!-- MICROSOFT CLARITY – estetään ennen suostumusta -->
    <script type="text/javascript">
      window.clarity = window.clarity || function() {(window.clarity.q = window.clarity.q || []).push(arguments)};
    </script>

    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Arial',sans-serif}
        body{background:#1a1a1a;color:#fff;line-height:1.6;overflow-x:hidden}
        header{background:#000;padding:15px;text-align:center;position:fixed;width:100%;top:0;z-index:1000}
        nav a{color:#fff;text-decoration:none;margin:0 20px;font-size:1.2em;transition:.3s;position:relative}
        nav a:hover{color:#4ade80}
        nav a::after{content:'';position:absolute;bottom:-2px;left:50%;transform:translateX(-50%);width:0;height:2px;background:#4ade80;transition:width .3s}
        nav a:hover::after{width:100%}
        section{padding:80px 20px;display:flex;flex-direction:column;align-items:center;justify-content:center}
        #home{position:relative;overflow:hidden;text-align:center;min-height:100vh}
        #home video{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1}
        #home h1{font-size:clamp(2.5rem,8vw,4rem);margin-bottom:20px;text-shadow:0 0 30px rgba(0,0,0,.8)}
        .btn{background:#333;color:#fff;padding:12px 28px;border-radius:8px;text-decoration:none;display:inline-block;margin-top:20px;transition:.3s}
        .btn:hover{background:#4ade80}
        .gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:30px;max-width:1200px;margin:80px auto 100px}
        .gallery-item{position:relative;height:280px;background:#000;border-radius:16px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.7)}
        .gallery-item video,.gallery-item img{width:100%;height:100%;object-fit:cover}
        #services,#equipment{max-width:1200px;margin:0 auto;text-align:center}
        #services h2,#equipment h2{font-size:clamp(2.2rem,7vw,3.2rem);margin-bottom:30px}
        .service-text,#equipment p{font-size:1.3rem;color:#ddd;line-height:1.7;margin-bottom:60px}
        .equipment-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:30px;max-width:1200px;margin:60px auto}
        .media-item{position:relative;padding-bottom:56.25%;background:#000;border-radius:16px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.7)}
        .media-item video,.media-item img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}
        .about-section,#retro-camera{max-width:1200px;margin:120px auto;display:flex;align-items:center;gap:60px;flex-wrap:wrap;padding:0 20px}
        .about-section .about-text,#retro-camera .retro-text{flex:1;min-width:300px;font-size:1.35rem;color:#e0e0e0;line-height:1.8}
        .about-section .about-image-container,#retro-camera .retro-video{flex:1;min-width:300px;max-width:600px;position:relative;padding-bottom:56.25%;border-radius:20px;overflow:hidden;box-shadow:0 15px 50px rgba(0,0,0,.9)}
        .about-slide{position:absolute;top:0;left:left:0;width:100%;height:100%;opacity:0;transition:opacity 1s ease}
        .about-slide.active{opacity:1}
        .about-slide img{width:100%;height:100%;object-fit:cover}
        #retro-camera video{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}
        #contact{max-width:800px;margin:0 auto;text-align:center;padding:80px 20px}
        #contact h2{font-size:2.8rem;margin-bottom:30px}
        #contact p{font-size:1.3rem;margin:15px 0}
        #contact a{color:#4ade80;text-decoration:none}
        footer{background:#000;padding:40px;text-align:center;font-size:1rem}

        /* EVÄSTE-IKKUNAT */
        .cookie-overlay{position:fixed;inset:0;background:rgba(0,0,0,.85);z-index:9998;opacity:0;visibility:hidden;transition:opacity .4s}
        .cookie-overlay.show{opacity:1;visibility:visible}
        #cookie-popup,#cookie-settings{
            position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(.9);
            width:90%;max-width:500px;background:#111;color:#eee;border-radius:16px;
            padding:32px;box-shadow:0 20px 60px rgba(0,0,0,.9);z-index:9999;
            opacity:0;visibility:hidden;transition:all .4s ease;
        }
        #cookie-popup.show,#cookie-settings.show{opacity:1;visibility:visible;transform:translate(-50%,-50%) scale(1)}
        #cookie-popup h3,#cookie-settings h3{font-size:1.9em;margin-bottom:16px;color:#fff}
        .consent-item{display:flex;gap:12px;margin:18px 0;align-items:flex-start}
        .consent-item svg{width:22px;height:22px;flex-shrink:0;fill:#4ade80;margin-top:2px}
        .eu-note{font-size:13px;margin-top:20px;color:#aaa;line-height:1.5}
        .eu-note a{color:#4ade80;text-decoration:underline}
        .buttons{display:flex;gap:14px;margin-top:30px;flex-wrap:wrap;justify-content:center}
        .buttons button{flex:1;min-width:140px;padding:14px;border:none;border-radius:12px;font-weight:600;cursor:pointer;transition:.3s}
        #accept-all{background:#0066ff;color:#fff}
        #accept-all:hover{background:#0052cc}
        #manage-btn,#deny-analytics,#accept-selected{background:#333;color:#fff}
        #manage-btn:hover,#deny-analytics:hover,#accept-selected:hover{background:#444}
        #back-btn{margin-top:20px;background:#222;color:#ccc;font-size:.9em}

        @media(max-width:768px){
            nav a{font-size:1em;margin:0 8px}
            #home h1{font-size:2.5em}
            .gallery{grid-template-columns:1fr}
            .gallery-item{height:180px}
            .equipment-grid{grid-template-columns:1fr}
        }
    </style>
</head>
<body>

    <!-- EVÄSTE-OVERLAY -->
    <div class="cookie-overlay" id="cookie-overlay"></div>

    <!-- ENSIMMÄINEN POPUP -->
    <div id="cookie-popup">
        <h3>Evästeiden käyttö</h3>
        <p>Tämä sivusto käyttää evästeitä käyttökokemuksen parantamiseen ja kävijätilastojen keräämiseen.</p>
        <div class="consent-item">
            <svg viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"/></svg>
            <div>Google Analytics ja Microsoft Clarity (tilastot ja käyttökokemuksen analysointi)</div>
        </div>
        <div class="eu-note">
            EU:n tietosuoja-asetuksen mukaisesti pyydämme suostumuksesi ei-välttämättömien evästeiden käyttöön.<br>
            <a href="https://europa.eu/youreurope/business/dealing-with-customers/data-protection/online-privacy/index_fi.htm" target="_blank">Lue lisää evästeistä ja yksityisyydestä</a>
        </div>
        <div class="buttons">
            <button id="accept-all">Hyväksy kaikki</button>
            <button id="manage-btn">Muuta asetuksia</button>
        </div>
    </div>

    <!-- TARKEMMAT ASETUKSET -->
    <div id="cookie-settings">
        <h3>Evästeasetukset</h3>
        <p>Valitse mitä evästeitä sallit:</p>
        <div class="consent-item">
            <svg viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"/></svg>
            <div><strong>Välttämättömät evästeet</strong><br>Aina päällä – tarvitaan sivuston perustoimintoihin</div>
        </div>
        <div class="consent-item">
            <svg viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"/></svg>
            <div><strong>Analytiikkaevästeet</strong><br>Google Analytics & Microsoft Clarity – tilastot ja käyttäytymisanalyysi</div>
        </div>
        <div class="buttons">
            <button id="deny-analytics">Kiellä analytiikka</button>
            <button id="accept-selected">Hyväksy valitut</button>
        </div>
        <button id="back-btn">← Takaisin</button>
    </div>

    <!-- SISÄLTÖ (sama kuin aiemmin) -->
    <header>
        <nav>
            <a href="etusivu.html">Koti</a>
            <a href="portfolio.html">Portfolio</a>
            <a href="valokuvaus.html">Valokuvaus</a>
            <a href="yhteystiedot.html">Yhteystiedot</a>
            <a href="puolustusvoimat.html">Puolustusvoimat</a>
        </nav>
    </header>

    <section id="home">
        <video autoplay muted loop playsinline>
            <source src="tst_testi_footgae.mp4" type="video/mp4">
        </video>
        <h1>Iivari Kortesoja</h1>
        <a href="#portfolio" class="btn">Katso töitäni</a>
    </section>

    <!-- ... kaikki loput sivun sisältö kuten edellisessä versiossa ... -->
    <!-- (lyhensin tässä esimerkissä, mutta alla on täysi koodi) -->

    <footer>
        <p>© Iivari Kortesoja 2025 | Y-Tunnus A38904</p>
    </footer>

    <script>
        // === EVÄSTE-SUOSTUMUS LOGIIKKA ===
        const popup = document.getElementById('cookie-popup');
        const settings = document.getElementById('cookie-settings');
        const overlay = document.getElementById('cookie-overlay');

        function setCookie(name, value, days) {
            const d = new Date();
            d.setTime(d.getTime() + (days*24*60*60*1000));
            document.cookie = name + "=" + value + ";expires=" + d.toUTCString() + ";path=/;SameSite=Lax";
        }

        function getCookie(name) {
            const cname = name + "=";
            const ca = document.cookie.split(';');
            for(let i = 0; i < ca.length; i++) {
                let c = ca[i].trim();
                if (c.indexOf(cname) == 0) return c.substring(cname.length);
            }
            return "";
        }

        function hideAll() {
            popup.classList.remove('show');
            settings.classList.remove('show');
            overlay.classList.remove('show');
        }

        function acceptAll() {
            setCookie('cookieConsent', 'full', 365);
            gtag('consent', 'update', { 'analytics_storage': 'granted' });
            clarity('consent');
            hideAll();
        }

        function denyAnalytics() {
            setCookie('cookieConsent', 'essential', 365);
            gtag('consent', 'update', { 'analytics_storage': 'denied' });
            hideAll();
        }

        function acceptSelected() {
            setCookie('cookieConsent', 'full', 365);
            gtag('consent', 'update', { 'analytics_storage': 'granted' });
            clarity('consent');
            hideAll();
        }

        // Näytetään popup jos suostumusta ei ole
        window.addEventListener('load', () => {
            if (!getCookie('cookieConsent')) {
                setTimeout(() => {
                    popup.classList.add('show');
                    overlay.classList.add('show');
                }, 1000);
            } else if (getCookie('cookieConsent') === 'full') {
                gtag('consent', 'update', { 'analytics_storage': 'granted' });
                clarity('consent');
            }
        });

        // Painikkeet
        document.getElementById('accept-all').onclick = acceptAll;
        document.getElementById('manage-btn').onclick = () => {
            popup.classList.remove('show');
            settings.classList.add('show');
        };
        document.getElementById('back-btn').onclick = () => {
            settings.classList.remove('show');
            popup.classList.add('show');
        };
        document.getElementById('deny-analytics').onclick = denyAnalytics;
        document.getElementById('accept-selected').onclick = acceptSelected;

        // === LOPUT SKRIPTIT (taustavideo, otsikko, kuvien vaihto jne.) ===
        const bgVideo = document.querySelector('#home video');
        new IntersectionObserver(e => e.forEach(en => en.isIntersecting ? bgVideo.play() : bgVideo.pause())).observe(document.getElementById('home'));

        const titles = ['Yritys','Bändi','Järjestö','Yrittäjä','Tapahtuma','Valokuvaus'];
        let i = 0;
        const titleEl = document.getElementById('dynamic-title');
        setInterval(() => {
            titleEl.style.opacity = 0;
            setTimeout(() => {
                i = (i + 1) % titles.length;
                titleEl.textContent = titles[i];
                titleEl.style.opacity = 1;
            }, 500);
        }, 3000);

        const slides = document.querySelectorAll('.about-slide');
        let current = 0;
        function nextSlide() {
            slides[current].classList.remove('active');
            current = (current + 1) % slides.length;
            slides[current].classList.add('active');
        }
        slides[0].classList.add('active');
        setInterval(nextSlide, 4000);
    </script>
</body>
</html>
