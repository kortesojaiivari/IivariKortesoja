<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puolustusvoimat & Combat Camera</title>

    <!-- GOOGLE ANALYTICS 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JTMFLZTH9R"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-JTMFLZTH9R', { 'anonymize_ip': true });
    </script>

    <!-- MICROSOFT CLARITY -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){( c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "ud6y4jpngh");
    </script>

    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{
            font-family:'Arial',sans-serif;
            background:#1a1a1a;
            color:#fff;
            line-height:1.6;
            overflow-x:hidden;
        }
        header{
            background:#000;
            padding:15px 20px;
            text-align:center;
            position:fixed;
            width:100%;
            top:0;
            z-index:1000;
            backdrop-filter:blur(10px);
        }
        nav a{
            color:#fff;
            text-decoration:none;
            margin:0 15px;
            font-size:1.2em;
            position:relative;
            transition:.3s;
        }
        nav a:hover{color:#4ade80}
        nav a::after{
            content:'';
            position:absolute;
            bottom:-6px;
            left:50%;
            transform:translateX(-50%);
            width:0;
            height:2px;
            background:#4ade80;
            transition:width .3s ease;
        }
        nav a:hover::after{width:100%}

        #home{
            position:relative;
            min-height:100vh;
            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:center;
            text-align:center;
            overflow:hidden;
        }
        #home video{
            position:absolute;
            top:0;left:0;
            width:100%;
            height:100%;
            object-fit:cover;
            z-index:-1;
        }
        #home h2{
            font-size:clamp(2.5rem,8vw,4.5rem);
            text-shadow:0 0 40px rgba(0,0,0,.9);
        }

        /* VAIN THUMBNAILIT ANIMOIDUT */
        .gallery{
            display:grid;
            grid-template-columns:repeat(auto-fit, minmax(340px, 1fr));
            gap:30px;
            max-width:1400px;
            margin:100px auto;
            padding:0 20px;
        }
        .gallery-item{
            position:relative;
            height:220px;
            border-radius:16px;
            overflow:hidden;
            box-shadow:0 10px 30px rgba(0,0,0,.7);
            cursor:pointer;
            opacity:0;
            transform:translateX(-80px);
            transition:all 0.7s cubic-bezier(0.25,0.46,0.45,0.94);
        }
        .gallery-item.visible{
            opacity:1;
            transform:translateX(0);
        }
        .gallery-item img{
            width:100%;
            height:100%;
            object-fit:cover;
            display:block;
        }
        .gallery-item::after{
            content:'▶';
            position:absolute;
            top:50%; left:50%;
            transform:translate(-50%,-50%);
            font-size:3.5rem;
            color:#fff;
            opacity:0;
            transition:opacity .3s;
            pointer-events:none;
        }
        .gallery-item:hover::after{opacity:0.8}
        .gallery-item:hover{transform:scale(1.05)}

        .about-section{
            max-width:1200px;
            margin:120px auto;
            display:flex;
            align-items:center;
            gap:60px;
            flex-wrap:wrap;
            padding:0 20px;
        }
        .about-image{
            flex:1;
            min-width:300px;
            max-width:500px;
            border-radius:20px;
            overflow:hidden;
            box-shadow:0 15px 50px rgba(0,0,0,.9);
        }
        .about-image img{width:100%;display:block}
        .about-text{
            flex:1.5;
            min-width:300px;
            font-size:1.35rem;
            color:#e0e0e0;
            line-height:1.8;
        }
        .btw-text{margin-top:40px;font-size:1.2rem;color:#bbb}

        .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.95);z-index:2000;align-items:center;justify-content:center;padding:20px}
        .modal-content{width:100%;max-width:1000px;aspect-ratio:16/9;border-radius:16px;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,.8)}
        .modal-content iframe{width:100%;height:100%;border:none}
        .close{position:absolute;top:30px;right:40px;font-size:3rem;color:#fff;cursor:pointer;opacity:0.8}
        .close:hover{opacity:1}

        footer{background:#000;padding:40px 20px;text-align:center;border-top:1px solid #333}

        @media(max-width:992px){.about-section{flex-direction:column;text-align:center}}
        @media(max-width:600px){.gallery{grid-template-columns:1fr}}
    </style>
</head>
<body>

    <header>
        <nav>
            <a href="indexi.html">Koti</a>
            <a href="portfolio.html">Portfolio</a>
            <a href="valokuvaus.html">Valokuvaus</a>
            <a href="yhteystiedot.html">Yhteystiedot</a>
            <a href="puolustusvoimat.html">Puolustusvoimat</a>
        </nav>
    </header>

    <section id="home">
        <video autoplay muted loop playsinline poster="pv-poster.jpg">
            <source src="tst_testi_footgae.mp4" type="video/mp4">
        </video>
        <h2>Puolustusvoimat & Combat Camera</h2>
    </section>

    <!-- Thumbnail-galleria – NOPEA PERÄKKÄINEN ANIMAATIO -->
    <section class="gallery">
        <div class="gallery-item" data-video-id="91wex5Lgolc"><img src="thumbnail1.jpg" alt="Combat Camera 1"></div>
        <div class="gallery-item" data-video-id="GLP9QxcEbXk"><img src="thumbnail2.jpg" alt="Combat Camera 2"></div>
        <div class="gallery-item" data-video-id="3AwEUP7o0qc"><img src="thumbnail3.jpg" alt="Combat Camera 3"></div>
        <div class="gallery-item" data-video-id="F-2a-c5J2ms"><img src="thumbnail4.jpg" alt="Combat Camera 4"></div>
        <div class="gallery-item" data-video-id="82S6evKfyPY"><img src="thumbnail5.jpg" alt="Combat Camera 5"></div>
        <div class="gallery-item" data-video-id="dQw4w9WgXcQ"><img src="thumbnail6.jpg" alt="Combat Camera 6"></div>
    </section>

    <div class="about-section">
        <div class="about-image">
            <img src="IivariKortesoja1.png" alt="Iivari Kortesoja">
        </div>
        <div class="about-text">
            <p>Palvelukseni Puolustusvoimissa oli unelma, jota en olisi uskonut kokevani. Pääsin valtakunnallisessa erityistehtävähaussa <strong>Combat Cameraan</strong>.</p>
            <p>Työskentely vaativissa olosuhteissa testasi fyysistä ja psyykkistä kestävyyttäni äärimmilleen. Viikot metsissä ympäri Suomea, kuvaten ja taistellen suomalaisten sekä ulkomaalaisten joukkojen kanssa harjoituksissa – olivat äärimmäisen palkitsevia ja opettavaisia.</p>
            <p class="btw-text">
                Olen myös työskennellyt Puolustusvoimilla videotuotannoissa jo ennen varusmiespalvelustani. Tehtäviin on kuulunut kuvaamista, editointia ja monikameratuotantoja.
            </p>
        </div>
    </div>

    </div>

    <div class="modal" id="videoModal">
        <span class="close">×</span>
        <div class="modal-content">
            <iframe id="youtubePlayer" src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
    </div>

    <footer>
        <p>© Iivari Kortesoja 2025 | Y-tunnus A38904</p>
    </footer>

    <script>
        // Taustavideo
        const bgVideo = document.querySelector('#home video');
        new IntersectionObserver(e => e.forEach(en => en.isIntersecting ? bgVideo.play() : bgVideo.pause()), {threshold: 0.5})
            .observe(document.getElementById('home'));

        // THUMBNAILIT – NOPEA PERÄKKÄINEN ANIMAATIO
        const thumbnails = document.querySelectorAll('.gallery-item');
        const thumbObserver = new IntersectionObserver((entries) => {
            entries.forEach((entry, index) => {
                if (entry.isIntersecting) {
                    setTimeout(() => {
                        entry.target.classList.add('visible');
                    }, index * 120); // 120ms viive per thumbnail → erittäin sulava ja nopea
                    thumbObserver.unobserve(entry.target); // animoi vain kerran
                }
            });
        }, { threshold: 0.2 });

        thumbnails.forEach(thumb => thumbObserver.observe(thumb));

        // Modaali
        const modal = document.getElementById('videoModal');
        const iframe = document.getElementById('youtubePlayer');
        const closeBtn = document.querySelector('.close');

        document.querySelectorAll('.gallery-item').forEach(item => {
            item.addEventListener('click', () => {
                const videoId = item.getAttribute('data-video-id');
                iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`;
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
        });

        closeBtn.onclick = modal.onclick = () => {
            modal.style.display = 'none';
            iframe.src = '';
            document.body.style.overflow = '';
        };

        document.addEventListener('keydown', e => {
            if (e.key === 'Escape') closeBtn.click();
        });
    </script>
</body>
</html>
